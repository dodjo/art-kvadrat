(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10d238cc"],{"02f4":function(t,e,n){var r=n("4588"),a=n("be13");t.exports=function(t){return function(e,n){var i,o,c=String(a(e)),s=r(n),u=c.length;return s<0||s>=u?t?"":void 0:(i=c.charCodeAt(s),i<55296||i>56319||s+1===u||(o=c.charCodeAt(s+1))<56320||o>57343?t?c.charAt(s):i:t?c.slice(s,s+2):o-56320+(i-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),a=n("32e9"),i=n("79e5"),o=n("be13"),c=n("2b4c"),s=n("520a"),u=c("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=c(t),d=!i((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),h=d?!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!e})):void 0;if(!d||!h||"replace"===t&&!l||"split"===t&&!p){var v=/./[f],g=n(o,f,""[t],(function(t,e,n,r,a){return e.exec===s?d&&!a?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),m=g[0],b=g[1];r(String.prototype,t,m),a(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,n){"use strict";var r=n("aae3"),a=n("cb7c"),i=n("ebd6"),o=n("0390"),c=n("9def"),s=n("5f1b"),u=n("520a"),l=n("79e5"),p=Math.min,f=[].push,d="split",h="length",v="lastIndex",g=4294967295,m=!l((function(){RegExp(g,"y")}));n("214f")("split",2,(function(t,e,n,l){var b;return b="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(a,t,e);var i,o,c,s=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,d=void 0===e?g:e>>>0,m=new RegExp(t.source,l+"g");while(i=u.call(m,a)){if(o=m[v],o>p&&(s.push(a.slice(p,i.index)),i[h]>1&&i.index<a[h]&&f.apply(s,i.slice(1)),c=i[0][h],p=o,s[h]>=d))break;m[v]===i.index&&m[v]++}return p===a[h]?!c&&m.test("")||s.push(""):s.push(a.slice(p)),s[h]>d?s.slice(0,d):s}:"0"[d](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a,r):b.call(String(a),n,r)},function(t,e){var r=l(b,t,this,e,b!==n);if(r.done)return r.value;var u=a(t),f=String(this),d=i(u,RegExp),h=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),x=new d(m?u:"^(?:"+u.source+")",v),_=void 0===e?g:e>>>0;if(0===_)return[];if(0===f.length)return null===s(x,f)?[f]:[];var w=0,y=0,k=[];while(y<f.length){x.lastIndex=m?y:0;var C,R=s(x,m?f:f.slice(y));if(null===R||(C=p(c(x.lastIndex+(m?0:y)),f.length))===w)y=o(f,y,h);else{if(k.push(f.slice(w,y)),k.length===_)return k;for(var D=1;D<=R.length-1;D++)if(k.push(R[D]),k.length===_)return k;y=w=C}}return k.push(f.slice(w)),k}]}))},2909:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(Array.isArray(t))return r(t)}function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||i(t)||o(t)||c()}n.d(e,"a",(function(){return s}))},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"4de0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page__content"},[t._m(0),n("div",{staticClass:"notice-list-wrapper"},[n("h3",{directives:[{name:"show",rawName:"v-show",value:0===t.notices.length,expression:"notices.length === 0"}]},[t._v("Уведомлений нет")]),n("div",{staticClass:"notice-list"},t._l(t.notices,(function(e,r){return n("div",{key:e.id,staticClass:"notice",on:{click:function(n){return t.readNotice(e)}}},[n("div",{staticClass:"notice__img",class:{new:null===e.read_at}},[n("img",{attrs:{src:e.data.image,alt:"photo",width:"40",height:"40"}})]),n("div",{staticClass:"notice__wrap"},[n("div",{staticClass:"notice__event"},[t._v(t._s(e.subject))]),n("div",{staticClass:"notice__name"},[t._v(t._s(e.body))]),n("div",{staticClass:"notice__comment"},[t._v(t._s(e.comment))]),n("div",{staticClass:"notice__date"},[t._v(t._s(t._f("formatDate")(e.created_at)))])]),n("button",{staticClass:"notice__btn-delete",on:{click:function(n){return n.stopPropagation(),t.deleteNotice(e,r)}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M15.266 15.313c-.282.28-.797.28-1.079 0L8 9.078l-6.234 6.235c-.282.28-.797.28-1.079 0-.28-.282-.28-.797 0-1.079L6.923 8 .688 1.812c-.282-.28-.282-.796 0-1.078.28-.28.796-.28 1.078 0L8 6.97 14.188.734c.28-.28.796-.28 1.078 0 .28.282.28.797 0 1.079L9.03 8l6.235 6.234c.28.282.28.797 0 1.079z"}})])])])})),0),n("button",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"playbill__more-btn button-warning",on:{click:t.loadMore}},[t._v("\n      показать ещё\n    ")])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page__header"},[n("h1",{staticClass:"page__title"},[t._v("\n      Уведомления\n    ")])])}],i=n("2909"),o=(n("96cf"),n("1da1")),c=n("e09c"),s=n("bc3a"),u=n.n(s),l={name:"NotificationPage",mixins:[c["a"]],data:function(){return{notices:[],pageData:[],currentPage:1,perPage:20}},computed:{showMore:function(){return this.pageData.pageCount>this.pageData.currentPage}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$loading.show(),n=new URL("".concat("https://api.art-kvadrat.dev2uit.ru","/v1/notification/list")),n.searchParams.set("per-page",this.perPage),n.searchParams.set("page",this.currentPage),t.next=6,u.a.get(n).then((function(t){var n;r.currentPage>1?(n=r.notices).push.apply(n,Object(i["a"])(t.data._items)):r.notices=t.data._items;r.pageData=t.data._meta,e.hide()})).catch((function(t){t.response||(r.$toasted.global.error("Нет соединения с сервером"),e.hide()),r.$toasted.global.error(t.response.data.message),e.hide()}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadMore:function(){this.pageData.pageCount>this.currentPage&&this.currentPage++,this.loadData()},readNotice:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new URL("".concat("https://api.art-kvadrat.dev2uit.ru","/v1/notification/mark-read")),n.searchParams.set("id",e.id),t.next=4,u.a.patch(n).then((function(t){switch(e.read_at=t.read_at,e.data.type){case"event":r.$router.push("/event/".concat(e.data.entity_id));break;case"event_comment":r.$router.push("/event/".concat(e.data.entity_id));break;case"startup":r.$router.push("/art-startup/".concat(e.data.entity_id));break;case"startup_comment":r.$router.push("/art-startup/".concat(e.data.entity_id));break;case"post":r.$router.push("/news-view/".concat(e.data.entity_id));break;case"resident_request":r.$router.push("/resident-profile");break;case"partner_request":r.$router.push("/partner-profile");break}console.log(e.data.type,"/event/".concat(e.data.entity_id))})).catch((function(t){t.response||r.$toasted.global.error("Нет соединения с сервером"),r.$toasted.global.error(t.response.data.message)}));case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),deleteNotice:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var r,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new URL("".concat("https://api.art-kvadrat.dev2uit.ru","/v1/notification/delete")),r.searchParams.set("id",e.id),t.next=4,u.a.delete(r).then((function(){a.notices.splice(n,1),a.$toasted.global.error("Уведомление удалено ")})).catch((function(t){t.response||a.$toasted.global.error("Нет соединения с сервером"),a.$toasted.global.error(t.response.data.message)}));case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}},p=l,f=n("2877"),d=Object(f["a"])(p,r,a,!1,null,"8785a5ac",null);e["default"]=d.exports},"520a":function(t,e,n){"use strict";var r=n("0bfb"),a=RegExp.prototype.exec,i=String.prototype.replace,o=a,c="lastIndex",s=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[c]||0!==e[c]}(),u=void 0!==/()??/.exec("")[1],l=s||u;l&&(o=function(t){var e,n,o,l,p=this;return u&&(n=new RegExp("^"+p.source+"$(?!\\s)",r.call(p))),s&&(e=p[c]),o=a.call(p,t),s&&o&&(p[c]=p.global?o.index+o[0].length:e),u&&o&&o.length>1&&i.call(o[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o}),t.exports=o},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"6b54":function(t,e,n){"use strict";n("3846");var r=n("cb7c"),a=n("0bfb"),i=n("9e1e"),o="toString",c=/./[o],s=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")((function(){return"/a/b"!=c.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?a.call(t):void 0)})):c.name!=o&&s((function(){return c.call(this)}))},aae3:function(t,e,n){var r=n("d3f4"),a=n("2d95"),i=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},e09c:function(t,e,n){"use strict";n("28a5"),n("6b54");var r=n("c1df"),a=n.n(r);e["a"]={filters:{formatDate:function(t){return a.a.unix(t).calendar(null,{sameDay:"[Сегодня], LT",nextDay:"[Завтра], LT",nextWeek:"DD MMM YYYY, HH:mm",lastDay:"[Вчера], LT",lastWeek:"DD MMM YYYY, HH:mm",sameElse:"DD MMM YYYY, HH:mm"})},fdate:function(t){return a.a.unix(t).format("DD.MM.YYYY")},ftime:function(t){return a.a.unix(t).format("hh:mm")},filterCost:function(t){return t<=0?"Бесплатно":t+"₽"},truncate:function(t,e){return t?(t=t.toString(),t.split(" ").length>e?t.split(" ").slice(0,e).join(" ")+"...":t):""}},methods:{getNoun:function(t,e,n,r){var a=Math.abs(t);return a%=100,a>=5&&a<=20?r:(a%=10,1===a?e:a>=2&&a<=4?n:r)}}}}}]);
//# sourceMappingURL=chunk-10d238cc.31c06c01.js.map
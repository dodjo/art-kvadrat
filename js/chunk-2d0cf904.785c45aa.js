(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf904"],{"63f7":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("div",{staticClass:"page__content"},[e._m(0),r("div",{staticClass:"create-startup"},[r("div",{staticClass:"create-startup__form"},[r("v-input",{attrs:{label:"Заголовок",error:e.$v.form.title.$error,"text-error":"введите заголовок","require-input":""},model:{value:e.$v.form.title.$model,callback:function(t){e.$set(e.$v.form.title,"$model",t)},expression:"$v.form.title.$model"}}),r("v-multiselect",{attrs:{label:"Категория",options:e.CATEGORY,value:e.form.categories},on:{"multi-change":function(t){e.form.categories=t}}}),r("div",{staticClass:"form-control",class:{"form-control--error":e.$v.form.body.$error}},[r("vue-editor",{attrs:{editorToolbar:e.customToolbar},model:{value:e.$v.form.body.$model,callback:function(t){e.$set(e.$v.form.body,"$model",t)},expression:"$v.form.body.$model"}}),r("label",{directives:[{name:"show",rawName:"v-show",value:!e.$v.form.body.$error,expression:"!$v.form.body.$error"}]},[e._v("\n            Описание\n            "),r("span",{staticClass:"form-control__require"},[e._v("*")])]),r("label",{directives:[{name:"show",rawName:"v-show",value:e.$v.form.body.$error,expression:"$v.form.body.$error"}]},[e._v("введите описание")])],1),r("file-pond",{ref:"pond",attrs:{name:"test","label-idle":"Добавить фото","allow-multiple":!0,"accepted-file-types":"image/jpeg, image/png",imagePreviewHeight:"100","allow-reorder":!0,"max-files":1},on:{updatefiles:e.handleFilePond,reorderfiles:e.handleFilePond}}),r("div",{staticClass:"create-startup__form-group-btn"},[r("button",{staticClass:"button-primary",on:{click:e.createStartup}},[e._v("\n            Отправить на проверку\n          ")])])],1)])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page__header"},[r("h1",{staticClass:"page__title"},[e._v("\n        Новый арт-стартап\n      ")])])}],i=(r("8e6e"),r("456d"),r("ac6a"),r("96cf"),r("1da1")),n=r("ade3"),s=r("b5ae"),c=r("4328"),l=r.n(c),u=r("1501"),d=r.n(u),p=(r("4ed3"),r("57c8"),r("1942")),f=r.n(p),m=r("2cfc"),v=r.n(m),b=r("bc3a"),h=r.n(b),g=r("5873"),$=r("88d3"),y=r("f581"),_=r("2f62");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=d()(f.a,v.a),C={name:"CreateStartup",components:{VInput:y["a"],VMultiselect:$["a"],VueEditor:g["a"],FilePond:j},data:function(){return{form:{title:"",body:"",categories:[],title_picture:{},images:[]},title_picture:null,category:[],customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}]]}},validations:{form:{title:{required:s["required"]},body:{required:s["required"]}}},mounted:function(){this.GET_CATEGORY()},methods:O(O({},Object(_["b"])("category",["GET_CATEGORY"])),{},{handleFilePond:function(){var e=this.$refs.pond.getFiles();this.title_picture=e.map((function(e){return e.file}))[0]},uploadTitleImage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("file",this.title_picture),e.next=4,h.a.post("".concat("http://api.art-kvadrat.localhost","/v1/event/upload-title"),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r.form.title_picture=e.data[0]})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createStartup:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.$touch(),this.$v.$invalid){e.next=8;break}if(!this.title_picture){e.next=5;break}return e.next=5,this.uploadTitleImage();case 5:return t=l.a.stringify({title:this.form.title,body:this.form.body,category_ids:this.form.categories.map((function(e){return e.id})),title_picture:this.form.title_picture}),e.next=8,h.a.post("".concat("http://api.art-kvadrat.localhost","/v1/startup/create"),t).then((function(){r.$toasted.global.success("Стартап создан и отправлен на проверку"),r.form={title:"",body:"",categories:[],title_picture:{},images:[]},r.$refs.pond.removeFiles(),r.$v.$reset(),r.$router.push("/art-startups")})).catch((function(e){e.data.forEach((function(e){r.$toasted.global.error(e.message)}))}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),computed:O({},Object(_["c"])("category",["CATEGORY"]))},x=C,k=r("2877"),P=Object(k["a"])(x,o,a,!1,null,"3d486f4b",null);t["default"]=P.exports}}]);
//# sourceMappingURL=chunk-2d0cf904.785c45aa.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ece6ee0"],{"0ea9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.load,expression:"load"}],staticClass:"page"},[r("div",{staticClass:"page__content"},[r("div",{staticClass:"page__header"},[r("breadcrumbs"),r("h1",{staticClass:"page__title"},[t._v("\n        "+t._s(t.startup.title)+"\n      ")])],1),r("div",{staticClass:"art-startup"},[r("div",{staticClass:"art-startup__header"},[r("div",{staticClass:"art-startup__block-first"},[t.getCategory?r("div",{staticClass:"art-startup__genre"},[t._v("\n            "+t._s(t.getCategory)+"\n          ")]):t._e()]),r("div",{staticClass:"art-startup__block-second"},[r("div",{staticClass:"art-startup__bookmark"},[r("svg",{attrs:{width:"20",height:"20"}},[r("use",{attrs:{href:a("4882")+"#icon-bookmark"}})]),t._v("\n            В избранном\n          ")])])])]),r("div",{staticClass:"art-startup__body"},[t.startup.title_picture.url?r("div",{staticClass:"art-startup__image"},[r("img",{attrs:{src:t.startup.title_picture.url,alt:""}})]):t._e(),r("div",{staticClass:"art-startup__description"},[r("div",{staticClass:"art-startup__col-left"},[r("h2",{staticClass:"art-startup__title"},[t._v("Описание")]),r("div",{domProps:{innerHTML:t._s(t.startup.body)}})]),r("div",{staticClass:"art-startup__col-right"},[r("div",{staticClass:"art-startup__rating"},[r("h2",{staticClass:"art-startup__title"},[t._v("Рейтинг")]),r("div",{staticClass:"art-startup__rating-body"},[r("star-rating",{attrs:{"read-only":!0,"star-size":24,rating:4}}),r("div",{staticClass:"art-startup__voting"},[t._v("417 голосов")])],1)]),r("div",{staticClass:"art-startup__members"},[r("span",{staticClass:"art-startup__members-name"},[t._v("Автор: ")]),r("div",{staticClass:"art-startup__members-tags"},[r("span",{staticClass:"art-startup__members-tag"},[t._v("\n                "+t._s(t.startup.author.full_name)+"\n              ")])]),r("span",{staticClass:"art-startup__members-name"},[t._v("Участники: ")]),t._m(0)])])]),r("comments",{attrs:{comments:t.startup.comments},on:{"add-comment":t.addNewComment}})],1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"art-startup__members-tags"},[a("span",{staticClass:"art-startup__members-tag"},[t._v("\n                Иванова Александра\n              ")]),a("span",{staticClass:"art-startup__members-tag"},[t._v("\n                Чакраборти Елизавета\n              ")])])}],n=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=(a("96cf"),a("1da1")),o=a("5b3d"),c=a.n(o),u=a("bc3a"),l=a.n(u),p=a("62a9"),m=a("4328"),_=a.n(m);function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"ArtStartupPage",components:{Comments:p["a"],StarRating:c.a},data:function(){return{startup:{author:{full_name:""},title_picture:{url:""}},load:!1}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$loading.show(),a=new URL("".concat("https://api.art-kvadrat.dev2uit.ru","/v1/startup/view")),a.searchParams.set("id",this.$route.params.id),t.next=5,l.a.get(a).then((function(t){r.startup=v({},t.data),r.load=!0,e.hide()})).catch((function(t){404===t.response.status?(r.$toasted.global.error("Арт-стартап не найден"),r.$router.push("/art-startups")):r.$toasted.global.error(t.response.data.message),t.response||(r.$toasted.global.error("Нет соединения с сервером"),e.hide()),e.hide()}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addNewComment:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l.a.post("".concat("https://api.art-kvadrat.dev2uit.ru","/v1/startup-comment/create"),_.a.stringify({startup_id:this.startup.id,body:e.body})).then((function(t){a.startup.comments.push(t.data)})).catch((function(t){console.log(t.request)}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},computed:{getCategory:function(){return this.startup.categories?this.startup.categories.map((function(t){return t.title})).join(" ● "):""},getTitlePicture:function(){return this.startup.title_picture.url||""}}},h=f,b=a("2877"),g=Object(b["a"])(h,r,s,!1,null,null,null);e["default"]=g.exports},"62a9":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reviews"},[a("div",{staticClass:"reviews__header"},[a("h2",{staticClass:"reviews__title"},[t._v("Отзывы и оценки")]),t.isAuthenticated?a("a",{staticClass:"reviews__btn button-secondary",on:{click:t.gotoNewComment}},[t._v("комментировать")]):t._e()]),t._l(t.comments,(function(e,r){return a("div",{key:r,staticClass:"reviews__list"},[a("div",{staticClass:"reviews__img"},[a("img",{attrs:{src:e.author.avatar.url,alt:""}})]),a("div",{staticClass:"reviews__wrap"},[a("div",{staticClass:"reviews__name"},[t._v(t._s(e.author.full_name))]),a("div",{staticClass:"reviews__date"},[t._v(t._s(t._f("formatDate")(e.created_at)))]),a("div",{staticClass:"reviews__comment"},[t._v(t._s(e.body))])])])})),t.isAuthenticated?a("div",{ref:"new-comment",staticClass:"reviews__list"},[a("div",{staticClass:"reviews__img"},[a("img",{attrs:{src:t.currentUser.avatar.url,alt:""}})]),a("div",{staticClass:"reviews__wrap"},[a("div",{staticClass:"reviews__name"},[t._v(t._s(t.currentUser.full_name))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.body,expression:"newComment.body"}],staticClass:"reviews__input",attrs:{placeholder:"Написать отзыв"},domProps:{value:t.newComment.body},on:{input:function(e){e.target.composing||t.$set(t.newComment,"body",e.target.value)}}}),a("button",{staticClass:"reviews__btn-comment button-primary",on:{click:t.addComment}},[t._v("\n        комментировать\n      ")])])]):t._e()],2)},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("e09c"),o=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={name:"Comments",props:{comments:{type:Array,default:function(){return[]}}},data:function(){return{newComment:{body:""},currentUser:{avatar:{url:""},full_name:""}}},mixins:[i["a"]],methods:{addComment:function(){this.$emit("add-comment",this.newComment),this.newComment.body=""},gotoNewComment:function(){window.scroll({top:this.$refs["new-comment"].offsetTop,behavior:"smooth"})}},mounted:function(){this.currentUser=this.$store.getters["user/getUser"]},computed:u({},Object(o["c"])("auth",["isAuthenticated"]))},p=l,m=a("2877"),_=Object(m["a"])(p,r,s,!1,null,"bf8dc9e6",null);e["a"]=_.exports}}]);
//# sourceMappingURL=chunk-4ece6ee0.c9acf767.js.map
{"version":3,"sources":["webpack:///./src/pages/UpdateEvent.vue?0c17","webpack:///src/pages/UpdateEvent.vue","webpack:///./src/pages/UpdateEvent.vue?ba5a","webpack:///./src/pages/UpdateEvent.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","_m","attrs","$v","form","title","$error","model","callback","$$v","$set","STARTUP","startup","on","$event","PLACE","place","CATEGORY","categories","members","notBeforeToday","slot","_v","class","body","customToolbar","ref","handleFilePond","updateEvent","staticRenderFns","components","VSelect","VInput","VMultiselect","VueEditor","FilePond","DatePicker","data","load","title_picture","images","begin_time","category","validations","required","mounted","GET_CATEGORY","GET_PLACE","GET_STARTUP","RESIDENTS_LIST","then","id","item","full_name","viewEvent","methods","fileImages","map","date","Date","setHours","computed","component"],"mappings":"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","file":"js/chunk-2d213c50.070884af.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.load),expression:\"load\"}],staticClass:\"page\"},[_c('div',{staticClass:\"page__content\"},[_vm._m(0),_c('div',{staticClass:\"create-event\"},[_c('div',{staticClass:\"create-event__form\"},[_c('v-input',{attrs:{\"label\":'Заголовок',\"error\":_vm.$v.form.title.$error,\"text-error\":'введите заголовок',\"require-input\":\"\"},model:{value:(_vm.$v.form.title.$model),callback:function ($$v) {_vm.$set(_vm.$v.form.title, \"$model\", $$v)},expression:\"$v.form.title.$model\"}}),_c('v-select',{attrs:{\"label\":'Стартап',\"options\":_vm.STARTUP,\"value\":_vm.form.startup,\"show-error\":_vm.$v.form.startup.$error,\"error-text\":'укажите стартап',\"require-input\":\"\"},on:{\"select-change\":function($event){_vm.form.startup = $event}}}),_c('v-select',{attrs:{\"label\":'Площадка проведения',\"options\":_vm.PLACE,\"value\":_vm.form.place,\"error-text\":'укажите необходимую площадку проведения'},on:{\"select-change\":function($event){_vm.form.place = $event}}}),_c('v-multiselect',{attrs:{\"label\":'Категория',\"options\":_vm.CATEGORY,\"value\":_vm.form.categories},on:{\"multi-change\":function($event){_vm.form.categories = $event}}}),_c('v-multiselect',{attrs:{\"label\":'Пригласить резидентов',\"label-field\":'full_name',\"options\":_vm.members,\"value\":_vm.form.members},on:{\"multi-change\":function($event){_vm.form.members = $event}}}),_c('div',{staticClass:\"form-control\"},[_c('date-picker',{attrs:{\"format\":\"DD MMM YYYY HH:mm\",\"type\":\"datetime\",\"value-type\":\"timestamp\",\"disabled-date\":_vm.notBeforeToday,\"editable\":false},model:{value:(_vm.form.begin_time),callback:function ($$v) {_vm.$set(_vm.form, \"begin_time\", $$v)},expression:\"form.begin_time\"}},[_c('i',{attrs:{\"slot\":\"icon-calendar\"},slot:\"icon-calendar\"})]),_c('label',[_vm._v(\"Время начала события\")])],1),_c('div',{staticClass:\"form-control\",class:{ 'form-control--error': _vm.$v.form.body.$error }},[_c('vue-editor',{attrs:{\"editorToolbar\":_vm.customToolbar},model:{value:(_vm.$v.form.body.$model),callback:function ($$v) {_vm.$set(_vm.$v.form.body, \"$model\", $$v)},expression:\"$v.form.body.$model\"}}),_c('label',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.$v.form.body.$error),expression:\"!$v.form.body.$error\"}]},[_vm._v(\"\\n            Описание события\\n            \"),_c('span',{staticClass:\"form-control__require\"},[_vm._v(\"*\")])]),_c('label',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$v.form.body.$error),expression:\"$v.form.body.$error\"}]},[_vm._v(\"введите описание события\")])],1),_c('file-pond',{ref:\"pond\",attrs:{\"name\":\"test\",\"label-idle\":\"Добавить фото\",\"allow-multiple\":true,\"accepted-file-types\":\"image/jpeg, image/png\",\"imagePreviewHeight\":\"100\",\"allow-reorder\":true},on:{\"updatefiles\":_vm.handleFilePond,\"reorderfiles\":_vm.handleFilePond}}),_c('div',{staticClass:\"create-event__form-group-btn\"},[_c('button',{staticClass:\"button-primary\",on:{\"click\":_vm.updateEvent}},[_vm._v(\"\\n            Отправить на проверку\\n          \")])])],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page__header\"},[_c('h1',{staticClass:\"page__title\"},[_vm._v(\"\\n        Редактировать событие\\n      \")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"page\" v-show=\"load\">\r\n    <div class=\"page__content\">\r\n      <div class=\"page__header\">\r\n        <h1 class=\"page__title\">\r\n          Редактировать событие\r\n        </h1>\r\n      </div>\r\n\r\n      <div class=\"create-event\">\r\n        <div class=\"create-event__form\">\r\n          <v-input\r\n            :label=\"'Заголовок'\"\r\n            :error=\"$v.form.title.$error\"\r\n            v-model=\"$v.form.title.$model\"\r\n            :text-error=\"'введите заголовок'\"\r\n            require-input\r\n          />\r\n          <v-select\r\n            :label=\"'Стартап'\"\r\n            :options=\"STARTUP\"\r\n            :value=\"form.startup\"\r\n            @select-change=\"form.startup = $event\"\r\n            :show-error=\"$v.form.startup.$error\"\r\n            :error-text=\"'укажите стартап'\"\r\n            require-input\r\n          >\r\n          </v-select>\r\n          <v-select\r\n            :label=\"'Площадка проведения'\"\r\n            :options=\"PLACE\"\r\n            :value=\"form.place\"\r\n            @select-change=\"form.place = $event\"\r\n            :error-text=\"'укажите необходимую площадку проведения'\"\r\n          >\r\n          </v-select>\r\n          <v-multiselect\r\n            :label=\"'Категория'\"\r\n            :options=\"CATEGORY\"\r\n            :value=\"form.categories\"\r\n            @multi-change=\"form.categories = $event\"\r\n          ></v-multiselect>\r\n          <v-multiselect\r\n            :label=\"'Пригласить резидентов'\"\r\n            :label-field=\"'full_name'\"\r\n            :options=\"members\"\r\n            :value=\"form.members\"\r\n            @multi-change=\"form.members = $event\"\r\n          ></v-multiselect>\r\n          <div class=\"form-control\">\r\n            <date-picker\r\n              v-model=\"form.begin_time\"\r\n              format=\"DD MMM YYYY HH:mm\"\r\n              type=\"datetime\"\r\n              value-type=\"timestamp\"\r\n              :disabled-date=\"notBeforeToday\"\r\n              :editable=\"false\"\r\n            >\r\n              <i slot=\"icon-calendar\"> </i>\r\n            </date-picker>\r\n            <label>Время начала события</label>\r\n          </div>\r\n\r\n          <div\r\n            class=\"form-control\"\r\n            :class=\"{ 'form-control--error': $v.form.body.$error }\"\r\n          >\r\n            <vue-editor\r\n              v-model=\"$v.form.body.$model\"\r\n              :editorToolbar=\"customToolbar\"\r\n            ></vue-editor>\r\n            <label v-show=\"!$v.form.body.$error\">\r\n              Описание события\r\n              <span class=\"form-control__require\">*</span>\r\n            </label>\r\n            <label v-show=\"$v.form.body.$error\">введите описание события</label>\r\n          </div>\r\n\r\n          <file-pond\r\n            name=\"test\"\r\n            ref=\"pond\"\r\n            label-idle=\"Добавить фото\"\r\n            :allow-multiple=\"true\"\r\n            accepted-file-types=\"image/jpeg, image/png\"\r\n            imagePreviewHeight=\"100\"\r\n            :allow-reorder=\"true\"\r\n            @updatefiles=\"handleFilePond\"\r\n            @reorderfiles=\"handleFilePond\"\r\n          />\r\n\r\n          <div class=\"create-event__form-group-btn\">\r\n            <button class=\"button-primary\" @click=\"updateEvent\">\r\n              Отправить на проверку\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required } from \"vuelidate/lib/validators\";\r\nimport qs from \"qs\";\r\nimport vueFilePond from \"vue-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\r\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\r\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\r\nimport axios from \"axios\";\r\nimport { VueEditor } from \"vue2-editor\";\r\nimport VMultiselect from \"../components/vMultiselect\";\r\nimport VInput from \"../components/vInput\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport VSelect from \"../components/vSelect\";\r\nimport DatePicker from \"vue2-datepicker\";\r\nimport \"vue2-datepicker/locale/ru\";\r\n\r\n// Create component\r\nconst FilePond = vueFilePond(\r\n  FilePondPluginFileValidateType,\r\n  FilePondPluginImagePreview\r\n);\r\n\r\nexport default {\r\n  name: \"UpdateEvent\",\r\n  components: {\r\n    VSelect,\r\n    VInput,\r\n    VMultiselect,\r\n    VueEditor,\r\n    FilePond,\r\n    DatePicker\r\n  },\r\n  data() {\r\n    return {\r\n      load: false,\r\n      form: {\r\n        title: \"\",\r\n        body: \"\",\r\n        categories: [],\r\n        place: {},\r\n        startup: {},\r\n        members: [],\r\n        title_picture: {},\r\n        images: [],\r\n        begin_time: \"\"\r\n      },\r\n      title_picture: null,\r\n      images: null,\r\n      category: [],\r\n      members: [],\r\n      customToolbar: [\r\n        [\"bold\", \"italic\", \"underline\"],\r\n        [{ list: \"ordered\" }, { list: \"bullet\" }]\r\n      ]\r\n    };\r\n  },\r\n  validations: {\r\n    form: {\r\n      title: {\r\n        required\r\n      },\r\n      body: {\r\n        required\r\n      },\r\n      startup: {\r\n        required\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.GET_CATEGORY();\r\n    this.GET_PLACE();\r\n    this.GET_STARTUP();\r\n    this.RESIDENTS_LIST().then(response => {\r\n      this.members = response.data._items.map(item => {\r\n        return {\r\n          id: item.id,\r\n          full_name: item.full_name\r\n        };\r\n      });\r\n    });\r\n    this.viewEvent();\r\n  },\r\n  methods: {\r\n    ...mapActions(\"category\", [\"GET_CATEGORY\"]),\r\n    ...mapActions(\"place\", [\"GET_PLACE\"]),\r\n    ...mapActions(\"startup\", [\"GET_STARTUP\"]),\r\n    ...mapActions(\"user\", [\"RESIDENTS_LIST\"]),\r\n    handleFilePond: function() {\r\n      let fileImages = this.$refs.pond.getFiles();\r\n      this.title_picture = fileImages.map(item => item.file)[0];\r\n      this.images = fileImages.map(item => item.file).slice(1);\r\n    },\r\n    async uploadImages() {\r\n      let formDataImages = new FormData();\r\n\r\n      this.images.forEach(item => {\r\n        formDataImages.append(\"file[]\", item);\r\n      });\r\n\r\n      await axios\r\n        .post(\r\n          `${process.env.VUE_APP_API_URL}/v1/event/upload-images`,\r\n          formDataImages,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }\r\n          }\r\n        )\r\n        .then(result => {\r\n          this.form.images = result.data.files;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    async uploadTitleImage() {\r\n      let formDataTitleImage = new FormData();\r\n      formDataTitleImage.append(\"file\", this.title_picture);\r\n\r\n      await axios\r\n        .post(\r\n          `${process.env.VUE_APP_API_URL}/v1/event/upload-title`,\r\n          formDataTitleImage,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }\r\n          }\r\n        )\r\n        .then(result => {\r\n          this.form.title_picture = result.data[0];\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    async viewEvent() {\r\n      let load = this.$loading.show();\r\n\r\n      let url = new URL(`${process.env.VUE_APP_API_URL}/v1/event/view`);\r\n      url.searchParams.set(\"id\", this.$route.params.id);\r\n\r\n      await axios\r\n        .get(url)\r\n        .then(response => {\r\n          this.form.title = response.data.title;\r\n          this.form.body = response.data.body;\r\n          this.form.categories = response.data.categories;\r\n          this.form.startup = response.data.startup;\r\n          this.form.members = response.data.members;\r\n          this.form.place = response.data.place;\r\n          this.form.begin_time = response.data.begin_time * 1000;\r\n          this.form.images = response.data.images;\r\n          this.load = true;\r\n          load.hide();\r\n        })\r\n        .catch(error => {\r\n          if (error.response.status === 404) {\r\n            this.$toasted.global.error(\"Событие не найдено\");\r\n            this.$router.push(\"/playbill\");\r\n          } else {\r\n            this.$toasted.global.error(error.response.data.message);\r\n          }\r\n          if (!error.response) {\r\n            this.$toasted.global.error(\"Нет соединения с сервером\");\r\n            load.hide();\r\n          }\r\n          load.hide();\r\n        });\r\n    },\r\n    async updateEvent() {\r\n      this.$v.$touch();\r\n      if (!this.$v.$invalid) {\r\n        if (this.title_picture) {\r\n          await this.uploadTitleImage();\r\n        }\r\n        if (Array.isArray(this.images) && this.images.length) {\r\n          await this.uploadImages();\r\n        }\r\n\r\n        let form = qs.stringify({\r\n          title: this.form.title,\r\n          body: this.form.body,\r\n          place_id: this.form.place.id,\r\n          category_ids: this.form.categories.map(item => item.id),\r\n          members_ids: this.form.members.map(item => item.id),\r\n          startup_id: this.form.startup.id,\r\n          begin_time: this.form.begin_time / 1000,\r\n          title_picture: this.form.title_picture,\r\n          images: this.form.images\r\n        });\r\n\r\n        let url = new URL(`${process.env.VUE_APP_API_URL}/v1/event/update`);\r\n        url.searchParams.set(\"id\", this.$route.params.id);\r\n\r\n        await axios\r\n          .patch(url, form)\r\n          .then(response => {\r\n            this.$toasted.global.success(\r\n              \"Событие обновлено и отправлено на проверку\"\r\n            );\r\n            this.form.title = response.data.title;\r\n            this.form.body = response.data.body;\r\n            this.form.categories = response.data.categories;\r\n            this.form.startup = response.data.startup;\r\n            this.form.place = response.data.place;\r\n            this.form.begin_time = response.data.begin_time * 1000;\r\n            this.form.title_picture = {};\r\n            this.form.images = [];\r\n\r\n            this.$refs.pond.removeFiles();\r\n            this.$v.$reset();\r\n            this.$router.push(\"/playbill\");\r\n          })\r\n          .catch(error => {\r\n            error.data.forEach(item => {\r\n              this.$toasted.global.error(item.message);\r\n            });\r\n          });\r\n      }\r\n    },\r\n    notBeforeToday(date) {\r\n      return date < new Date(new Date().setHours(0, 0, 0, 0));\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"category\", [\"CATEGORY\"]),\r\n    ...mapGetters(\"place\", [\"PLACE\"]),\r\n    ...mapGetters(\"startup\", [\"STARTUP\"])\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateEvent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateEvent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpdateEvent.vue?vue&type=template&id=a633fd44&\"\nimport script from \"./UpdateEvent.vue?vue&type=script&lang=js&\"\nexport * from \"./UpdateEvent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}